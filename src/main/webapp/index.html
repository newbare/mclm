<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="UTF-8"> 
	<title>MCLMv2.0</title>

<!-- EXT JS -->
	<script type="text/javascript" src="extjs/ext-all.js"></script>

	<!--  
	<script type="text/javascript" src="extjs/classic/theme-neptune/theme-neptune.js"></script>
	<link rel="stylesheet" type="text/css" href="extjs/classic/theme-neptune/resources/theme-neptune-all.css">
	-->
	  
	   
	<script type="text/javascript" src="extjs/classic/theme-gray/theme-gray.js"></script>
	<link rel="stylesheet" type="text/css" href="extjs/classic/theme-gray/resources/theme-gray-all.css">
	 
	 
	<!--  
	<script type="text/javascript" src="extjs/classic/theme-triton/theme-triton.js"></script>
	<link rel="stylesheet" type="text/css" href="extjs/classic/theme-triton/resources/theme-triton-all.css">
	 -->
	
	
<!-- OPENLAYERS -->
	<script type="text/javascript" src="js/openlayers3.15.js"></script>
	<link rel="stylesheet" href="css/openlayers3.15.css" type="text/css">
	
<!-- JQUERY -->
	<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>

<!-- INTERNO -->
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script type="text/javascript" src="js/buttons.js"></script>
	<script type="text/javascript" src="js/layer-tree-search.js"></script>
	<script type="text/javascript" src="js/layer-tree-store.js"></script>
	<script type="text/javascript" src="js/layer-tree-tree.js"></script>
	<script type="text/javascript" src="js/cenario-tree-store.js"></script>
	<script type="text/javascript" src="js/cenario-tree-tree.js"></script>
	<script type="text/javascript" src="js/painel-direito.js"></script>
	<script type="text/javascript" src="js/painel-esquerdo.js"></script>
	<script type="text/javascript" src="js/painel-inferior.js"></script>
	<script type="text/javascript" src="js/painel-central.js"></script>
	<script type="text/javascript" src="js/aba01.js"></script>
	<script type="text/javascript" src="js/aba02.js"></script>
	<script type="text/javascript" src="js/config.js"></script>
	<script type="text/javascript" src="js/external-sources.js"></script>

<!-- MAPA -->
	<script type="text/javascript" src="js/mapa/wms.js"></script>
	<script type="text/javascript" src="js/mapa/interrogacao.js"></script>
	<script type="text/javascript" src="js/mapa/windyty.js"></script>
	<script type="text/javascript" src="js/mapa/layer-stack.js"></script>
	<script type="text/javascript" src="js/mapa/legenda.js"></script>

<!-- STARTUP -->

	<!-- Aqui eh o ponto de entrada do sistema -->
	<script type="text/javascript">
	
		var mainPanel = null;
	
		Ext.Loader.setConfig({ 
			enabled: true 
		});
	   
	
		Ext.onReady(function() {
		   // Solicita a configuracao do sistema. Caso Ok, inicia a interface.	
			Ext.Ajax.request({
				url: 'getConfig',
				success: function(response, opts) {
					var config = Ext.decode(response.responseText);
					runSystem( config );
				},
				failure: function(response, opts) {
					Ext.Msg.alert('Erro ao receber a configuração do servidor' );
				}
			});		   
		         
		});

	   
	   function runSystem( config ) {
		   
	      mainPanel = Ext.create('Ext.tab.Panel', {
	           plugins: 'viewport',
	           items: [ aba01, aba02 ],
			   renderTo : Ext.getBody(),
			   listeners:{
			    	afterrender:function(){
			    		drawMap( config )
			        }
			   } 			   
	       });      
	       
	       initTips();
	       
	   }
	   
	   
	   function drawMap( config ) {
			var container = painelCentral.body.dom.id;
			loadMap( container, config ); 
		}	   
	   
	</script>

</head>
<body></body>

</html>